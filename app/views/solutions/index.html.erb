<% @solutions ||= solutions %>
<h1>Listing solutions</h1>

<% if @solutions.any? %>
  <table class="table table-bordered solutions-table">
    <tr>
      <th></th>
      <th>Solution url</th>
      <th>User</th>
      <th>Valid solution</th>
      <th>Notes</th>
      <% if can?(:manage, Solution) %>
        <th></th>
        <th></th>
      <% end %>
      <th>Submitted</th>
    </tr>

  <% @solutions.each do |solution| %>
    <% present solution do |presenter| %>
      <tr>
        <td class="vote-cell" rel="<%= solution.id %>">
          <%= presenter.up_vote_arrow %><br />
          <%= presenter.down_vote_arrow %>
          <div><%= solution.positives.size %></div>
        </td>
        <td><%= link_to('View source', solution.solution_url) %></td>
        <td><%#= solution.user.username %></td>
        <td><%= solution.valid_solution ? "Yes" : "No" %></td>
        <td><%= link_to('Click to view', challenge_solution_path(solution.challenge, solution)) %></td id="solution_<%= solution.id%>">
        <% if can?(:manage, Solution) %>
          <td><%= link_to 'Edit', edit_challenge_solution_path(solution.challenge, solution) %></td id="edit_solution_<%= solution.id%>">
          <td><%= link_to 'Destroy', challenge_solution_path(solution.challenge, solution), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
        <td><%= solution.created_at.to_time %></td>
      </tr>
    <% end %>
  <% end %>
  </table>
<% else %>
<div id="no-solutions">There doesn't seem to be anything here.</div>
<% end %>

<br />

<div>
  <%= link_to("Submit Solution", new_challenge_solution_path(@challenge), class: 'btn btn-success btn-large') %>
</div>
